<!doctype html>
<html lang="en">
<!--todo hacky module with its own angular app. Merge it to the main angular app-->
<head>
  <meta charset="UTF-8">

  <script src="app/bower_components/angular/angular.js"></script>
  <script src="app/bower_components/sprintf/dist/sprintf.min.js"></script>
   <!--<script src="app/bower_components/google-code-prettify/src/run_prettify.js" defer="defer"></script>-->
  <!--<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>-->
  <!--<script src="app/bower_components/google-code-prettify/src/prettify.js"></script>-->
  <script src="app/bower_components/vkBeautify/vkbeautify.js"></script>

  <script src="app/components/common/Constants.js"></script>

  <script type="text/javascript">
    var App = angular.module('myApp', [], function($locationProvider) {
      $locationProvider.html5Mode({
        enabled: true,
        requireBase: false
      });
    });

    App.controller('myCtrl', function ($scope, $http, $window) {
      console.log("search:", $window.location.search);

      var url = 'v1/documents' + $window.location.search;
      $http.get(url).then(
          function(response) {
            $scope.dom = vkbeautify.xml(response.data, 4);
            console.log("data:",  response.data);
//            PR.prettyPrint(); // todo doesn't work
          },
          function(response) {
            $scope.dom = vkbeautify.xml('<xml><error>Error! Unable to retrieve document</error></xml>');
          }
      );
    });

  </script>
</head>

<body ng-app="myApp" ng-cloak>
<div ng-controller="myCtrl">
  <pre ng-if="dom" class="prettyprint lang-xml">{{dom}}</pre>
</div>
</body>
</html>